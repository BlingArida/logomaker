  <html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
 $(function(){
    // on hover, show descriptions
    $('[data-toggle="popover"]').popover({trigger:'hover'});
    // onclick append to parameters
    //$('[data-toggle="popover"]').click
    $('[data-toggle]').click
    //$('[data]').click
    (
        function()
        {
            var parameter = $(this).attr("data");
            var defaultValue = $(this).attr("data-target");
            document.getElementById("para").innerHTML = parameter;
            $('#paramsTextAreaId').append(parameter+":"+defaultValue+"\n");
            //console.log(parameter)
        }
    );
});

function toggleParams(id) {
    var x = document.getElementById(id);

    if (x.style.display === "block")
    {
        x.style.display = "none";
    } else
    {
    	x.style.display ="block";
    }
}

</script>

<style>

body{
background: #ECE9E6;  /* fallback for old browsers */
background: -webkit-linear-gradient(to right, #FFFFFF, #ECE9E6);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to right, #FFFFFF, #ECE9E6); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}


.button-container {
    width: 850px;
    overflow-y: auto;
}

.button-container > button {
    width: 200px;
    overflow-y: auto;
}

</style>

<!-- style sheet -->
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">

</head>

<body>

<!-- data upload form -->
<form class="inline-div" action = "/" method = "POST" enctype = "multipart/form-data">

    {% if radioState == 'fasta' %}
    FASTA file
    <input id="fasta_id1" type="radio" name="fileformat" value="fasta" checked="checked"/>
    <br>
    MEME file
    <input id="meme_id1" type="radio" name="fileformat" value="meme" />
    <br>
    CSV file
    <input id="csv_id1" type="radio" name="fileformat" value="csv" />
    <br>
    {% elif radioState == 'meme' %}
    FASTA file
    <input id="fasta_id2" type="radio" name="fileformat" value="fasta" />
    <br>
    MEME file
    <input id="meme_id2" type="radio" name="fileformat" value="meme" checked="checked"/>
    <br>
    CSV file
    <input id="csv_id2" type="radio" name="fileformat" value="csv" />
    <br>
    {% elif radioState == 'csv' %}
    FASTA file
    <input id="fasta_id3" type="radio" name="fileformat" value="fasta" />
    <br>
    MEME file
    <input id="meme_id3" type="radio" name="fileformat" value="meme"/>
    <br>
    CSV file
    <input id="csv_id3" type="radio" name="fileformat" value="csv" checked="checked"/>
    <br>
    {% else %}
    FASTA file
    <input id="fasta_id4" type="radio" name="fileformat" value="fasta" checked="checked"/>
    <br>
    MEME file
    <input id="meme_id4" type="radio" name="fileformat" value="meme" />
    <br>
    CSV file
    <input id="csv_id4" type="radio" name="fileformat" value="csv" />
    <br>
    {% endif %}

    <input type = "file" name = "file" />
    <input type="submit" value="Upload Data" name="dataUploadButton">


</form>


<!-- Parameters upload form -->
<form class="inline-div" action = "/" method = "POST" enctype = "multipart/form-data">
    <input type = "file" name = "file" />
    <input type="submit" value="Upload Parameters" name="parameterUploadButton">
</form>

<br>
<!-- Input display text box -->
<div class="inline-div">
<h2 align="left">Input Data</h2>
<form action="/" method="POST">
<textarea name="inputTextArea" rows="100" cols="50" class="inline-txtarea">{% for row in range(inputDataLength) %}{{ displayInput[row][0] | safe }}{% endfor %}
</textarea>
<!-- <input type="submit" value="Upload Data" name="dataUploadButton"> -->
</form>
</div>

<!-- Parameters text box -->
<div class="inline-div">
<h2 align="left">Style</h2>
<form action="/" method="POST">
<textarea id="paramsTextAreaId" name="paramsTextArea" rows="100" cols="50" class="inline-txtarea">{% for row in range(paramsLength) %}{{ displayParams[row][0] | safe }}{% endfor %}
</textarea>
<!-- update button -->
<input type="submit" id="btnSubmit" value="Update logo" name="parameterButton">
</form>
</div>


<!-- real file name -->
<br>
{% if realUploadedFileName|length>0 %}
<h3> Uploaded {{realUploadedFileName}} </h3>
{% endif %}

<!-- added parameter: append only works if the following is implemented -->
<p hidden id="para"></p>

<div>
<h2>Logo</h2>
<!-- Display the logo -->
{% if logoFailure|length == 0 %}
    <p>
    {% if result != None %}
    <img src="data:image/png;base64,{{ result }}" width="800">
    {% endif %}
    </p>
{% elif logoFailure|length>0 %}
    <h2> {{logoFailure}} </h2>
{% endif %}
</div>

<!-- Parameter Section Buttons -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- <table  rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
<div class="button-container">
<h2> Optional Style Parameters</h2>
{% for key,value in sectionDict.iteritems() -%}
<button onclick="toggleParams('{{ key[0:3] }}')">{{ key }}

<!-- hide parameter list unless button is clicked -->
<style>
#{{ key[0:3] }} {
display : none;
}
</style>

<!-- list of parameters associated with section -->
<table id="{{ key[0:3] }}">
<tr><th style="width:300px;">{{ key }}</th></tr>
          <!-- <br> -->
          {% for val in value %}
                {#  {{ val[0] }} gives parameter names #}
                {#  {{ val[1] }} gives default values #}
                {#  {{ val[2] }} gives descriptions #}
                {# {{ val[0] }}:{{ val[1] }} #}
                <tr><td>
                <a id="{{ val[0] }}" href="#" data-toggle="popover" title="Parameter Description" data-content="{{ val[2] }}" data="{{ val[0] }}" data-target="{{ val[1] }}">{{ val[0] }}</a>
                </td></tr>
          <!-- <br> -->
          {% endfor %}
</table>
</button>
{%- endfor %}
</div>


<!-- Feedback -->
<div>
<h2 align="left">Feedback</h2>
<p>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <script>
                var messages = {{ messages | safe }};
                for (var i=0; i<messages.length; i++)

                {
                    document.write(messages[i]);
                }

            </script>
        {% endif %}
    {% endwith %}
</p>
</div>

<!--
{#
<h2> Test development </h2>
<div class="container">
  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Dropdown Example
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a href="#">HTML</a></li>
      <li><a href="#">CSS</a></li>
      <li><a href="#">JavaScript</a></li>
    </ul>
  </div>
</div>
#}
-->


</body>
</html>